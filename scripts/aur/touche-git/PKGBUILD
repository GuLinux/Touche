# Maintainer: Marco Gulino <marco.gulino@gmail.com>

pkgname=touche-git
pkgver=20210124
pkgrel=1
pkgdesc="Touch√© is a KDE application that brings full support on GNU/Linux desktops to your input devices: keyboard, mice, even IR remote receivers"
arch=('i686' 'x86_64')
url="https://github.com/GuLinux/Touche"
license=('GPL')
groups=()
depends=('qt5-base' 'kdelibs4support')
makedepends=('git' 'cmake' 'kdesignerplugin' 'kdoctools' 'kinit' 'extra-cmake-modules')
optdepends=('cwiid-git')
source=("$pkgname"::"git+https://github.com/GuLinux/Touche.git")
md5sums=('SKIP')
provides=()
conflicts=()
replaces=()
backup=()
options=()
noextract=()

pkgver() {
  cat "$srcdir/${pkgname%-git}/version.txt"
}

build() {
  cmake -B "$srcdir/${pkgname%-git}-build" \
      -S "$srcdir/${pkgname%-git}" \
      -DCMAKE_INSTALL_PREFIX=/usr \
      -DCMAKE_BUILD_TYPE=None \
      -DQT_QMAKE_EXECUTABLE=qmake-qt5
  make -C "$srcdir/${pkgname%-git}-build"
}

package() {
  make -C "$srcdir/${pkgname%-git}-build" DESTDIR=${pkgdir} install
}
